
Utils = {

	searchControl: function(){
		// Создадим экземпляр элемента управления «поиск по карте»
		// с установленной опцией провайдера данных для поиска по организациям.
		var searchControl = new ymaps.control.SearchControl({
			options: {
				//float: 'right',
				//floatIndex: 100,
				noPlacemark: false,
				//noCentering: true,
				//noPopup: true,
				useMapBounds: true,
				visible: !false,
				//kind: "route",
				checkZoomRange: true,
				//resultsPerPage: 20,
				//showFeedbackAfterResults: true,
				strictBounds: true,
				//boundedBy: circle.geometry.getBounds(),
				results: 50,
				provider: 'yandex#search'	
			}
		});
		var resultsDots;
		searchControl.events.add("load", function(e){
			e.preventDefault();
			resultsDots = searchControl.getResultsArray();
			dotsInCircle(resultsDots);
		});
	},
	drawCircle: function(radius){
		// Создаем круг.
		var circle = new ymaps.Circle([
				// Координаты центра круга.
				mainDot,
				// Радиус круга в метрах.
				radius
			], {}, {
				fillColor: "#cc25271f",
				strokeColor: "#2121213d",
				strokeOpacity: 0.8,
				strokeWidth: 5
			});

		// Добавляем круг на карту.
		myMap.geoObjects.add(circle);
		//circle.editor.startEditing();
		return circle;
	},

	dotsInCircle: function(dots, circle){

		var radiusStart = circle.geometry.getBounds()[0],
				radiusEnd = circle.geometry.getBounds()[1],
				dotLat, dotLng;

		//console.log(radiusStart);
		for (var i = 0; i < dots.length; i++) {
			dotLat = dots[i].geometry.getCoordinates()[0];
			dotLng = dots[i].geometry.getCoordinates()[1];
			dots[i].options.set({
				iconLayout: 'default#image',
				iconImageHref: "img/icons/marker-offices-2.png",
				iconImageSize: [29, 41]
			});
			if( dotLat > radiusStart[0] && dotLng > radiusStart[1] && dotLat < radiusEnd[0] && dotLng < radiusEnd[1]){
				dots[i].options.set('visible', true);
				//console.log(dots[i]);
				//window["zx"+i] = dots[i];
			}else{
				//console.log("false");
				dots[i].options.set('visible', false);
			}
		}
	}


}

function initBeside(mainDot) {

	var myMap = new ymaps.Map('map-beside', {
		center: mainDot,
		zoom: 14,
		checkZoomRange: true,
		restrictMapArea: true,
		searchControlProvider: 'yandex#search',
		controls: []
	})

	Utils.searchControl();
	var circle = Utils.drawCircle(1000);
	// Фильтрация точек относительно радиуса
	Utils.dotsInCircle(dots, circle);

	window.getAreasPoligons = function(){
		$.ajax({
			type: "GET",
      url: "areaspoligons.json",
			success: function(data){
				window.mata = data;
				drawPoligons(data);

				// var poli = data[0].data.items[0].displayGeometry.geometries[0].coordinates;
				// //console.log(poli[0].coordinates[0]);
				
				// var myPolygon = new ymaps.Polygon([
				// 		// Указываем координаты вершин многоугольника.
						
				// 		[
				// 			[69.03002599999999, 41.225173], [69.02890099999999, 41.227805], [69.02707699999999, 41.22864], [69.026465, 41.230931999999996], [69.029051, 41.238333999999995], [69.028815, 41.239922], [69.02637899999999, 41.242861], [69.022324, 41.244699], [69.020811, 41.246157], [69.023257, 41.247752], [69.025306, 41.250431999999996], [69.035831, 41.252416], [69.038996, 41.254448], [69.039672, 41.255282], [69.039222, 41.257546999999995], [69.04101399999999, 41.261278999999995], [69.040241, 41.264638999999995], [69.03805299999999, 41.266338999999995], [69.03632499999999, 41.266266], [69.03536, 41.266841], [69.03337499999999, 41.266646], [69.031937, 41.267682], [69.029094, 41.268119999999996], [69.027506, 41.269211999999996], [69.027238, 41.270078999999996], [69.025843, 41.270134999999996], [69.025092, 41.270936999999996], [69.023826, 41.270993], [69.02271, 41.271826999999995], [69.017099, 41.273373], [69.017797, 41.276303], [69.016209, 41.277896999999996], [69.015694, 41.284089], [69.01346199999999, 41.289235999999995], [69.01484599999999, 41.293298], [69.018451, 41.298581], [69.020329, 41.298262], [69.021627, 41.298994], [69.02373, 41.298232999999996], [69.026358, 41.298241999999995], [69.02878299999999, 41.302651], [69.030102, 41.303314], [69.03757999999999, 41.301704], [69.039394, 41.305353], [69.041057, 41.305903], [69.04204399999999, 41.307553999999996], [69.045033, 41.309999999999995], [69.049125, 41.311011], [69.05165699999999, 41.310603], [69.05623299999999, 41.310781], [69.057881, 41.313728999999995], [69.058065, 41.318964], [69.059444, 41.321548], [69.058416, 41.326817999999996], [69.066619, 41.332653], [69.072777, 41.335313], [69.074648, 41.339566999999995], [69.079454, 41.338406], [69.080972, 41.337593999999996], [69.086047, 41.338006], [69.089688, 41.336316], [69.090251, 41.338114999999995], [69.09211499999999, 41.340002999999996], [69.092406, 41.342317], [69.093813, 41.344536999999995], [69.094606, 41.350046], [69.095705, 41.350068], [69.095764, 41.351091], [69.09760399999999, 41.351859], [69.098494, 41.352893], [69.103183, 41.353916], [69.105009, 41.353352], [69.10734599999999, 41.354045], [69.114113, 41.352343999999995], [69.11912099999999, 41.352227], [69.11905399999999, 41.350331], [69.11963, 41.350069999999995], [69.11991499999999, 41.348374], [69.126397, 41.347147], [69.12848799999999, 41.344905], [69.132919, 41.344028], [69.136449, 41.344924999999996], [69.139308, 41.344063999999996], [69.139743, 41.343241], [69.142905, 41.341994], [69.145043, 41.344091999999996], [69.14694399999999, 41.343579], [69.146615, 41.342486], [69.150592, 41.340765999999995], [69.15220699999999, 41.342504], [69.154916, 41.341657], [69.15471, 41.343312], [69.15616, 41.343342], [69.155885, 41.344558], [69.157232, 41.344801], [69.156286, 41.346385], [69.156965, 41.347463999999995], [69.15785699999999, 41.347563], [69.15914099999999, 41.34927], [69.16122399999999, 41.350128], [69.161469, 41.350967], [69.162105, 41.35071], [69.163212, 41.351552], [69.163595, 41.352398], [69.16279399999999, 41.353462], [69.162654, 41.355258], [69.16602499999999, 41.360766999999996], [69.165924, 41.361806], [69.16722399999999, 41.361788999999995], [69.166747, 41.363099], [69.16787, 41.363074], [69.168874, 41.363664], [69.169979, 41.365538], [69.170687, 41.365632999999995], [69.171572, 41.366679999999995], [69.173739, 41.366606999999995], [69.17699999999999, 41.367394999999995], [69.179537, 41.367176], [69.182908, 41.368392], [69.185132, 41.368103], [69.172096, 41.359525], [69.16753899999999, 41.354575], [69.165188, 41.348323], [69.163988, 41.336797999999995], [69.162888, 41.333724], [69.159784, 41.328157], [69.157916, 41.328246], [69.156711, 41.327244], [69.154816, 41.327278], [69.154669, 41.325969], [69.153437, 41.325235], [69.153922, 41.324537], [69.153548, 41.323420999999996], [69.154532, 41.322474], [69.153533, 41.321106], [69.154294, 41.32064], [69.152487, 41.320324], [69.147759, 41.313393999999995], [69.14732599999999, 41.313147], [69.146472, 41.313606], [69.148018, 41.311658], [69.147221, 41.310157], [69.148279, 41.309906], [69.14895, 41.308352], [69.148501, 41.305306], [69.147503, 41.303999], [69.145161, 41.302782], [69.144735, 41.300591], [69.142802, 41.299876999999995], [69.14282899999999, 41.29887], [69.141066, 41.296827], [69.140123, 41.296631999999995], [69.140028, 41.295879], [69.138426, 41.294942], [69.138679, 41.293923], [69.138094, 41.292438], [69.133648, 41.289746], [69.13380599999999, 41.288700999999996], [69.13203899999999, 41.288018], [69.131901, 41.287290999999996], [69.134872, 41.283927], [69.134081, 41.281258], [69.132829, 41.280372], [69.13331099999999, 41.278931], [69.13149, 41.278996], [69.130264, 41.277134], [69.128565, 41.275965], [69.128132, 41.274085], [69.125483, 41.272017], [69.125187, 41.270109], [69.122709, 41.26989], [69.122784, 41.268024], [69.121693, 41.265755], [69.122215, 41.265571], [69.123256, 41.267244999999996], [69.125254, 41.266883], [69.131587, 41.269059999999996], [69.134207, 41.271735], [69.136635, 41.272787], [69.139704, 41.275244], [69.140956, 41.277795999999995], [69.143072, 41.278599], [69.14468099999999, 41.28039], [69.14611, 41.281136], [69.147487, 41.280938], [69.146256, 41.276178], [69.146862, 41.264949], [69.14766999999999, 41.262465999999996], [69.149501, 41.260175], [69.152318, 41.257897], [69.16091899999999, 41.252508999999996], [69.163371, 41.250116], [69.166724, 41.240251], [69.164551, 41.235859], [69.16883, 41.234711], [69.17406199999999, 41.228311], [69.17383099999999, 41.227142], [69.171825, 41.226031], [69.172448, 41.225437], [69.1719, 41.225131999999995], [69.17440599999999, 41.222522999999995], [69.173963, 41.221705], [69.175516, 41.221347], [69.17452899999999, 41.218765], [69.176369, 41.217679], [69.177613, 41.218942999999996], [69.179644, 41.217906], [69.180585, 41.219012], [69.18375999999999, 41.21667], [69.18139, 41.214518999999996], [69.18609099999999, 41.211365], [69.18656399999999, 41.212399999999995], [69.18535, 41.212762999999995], [69.185267, 41.214092], [69.18620899999999, 41.215064], [69.185532, 41.215964], [69.186413, 41.216234], [69.187472, 41.215769], [69.188328, 41.216606999999996], [69.18697399999999, 41.217302], [69.185715, 41.218883], [69.185818, 41.22072], [69.18749799999999, 41.220653999999996], [69.186447, 41.222558], [69.18777299999999, 41.222176], [69.188903, 41.222454], [69.187867, 41.22387], [69.191638, 41.2251], [69.191019, 41.226161], [69.192432, 41.22658], [69.19243399999999, 41.227241], [69.193439, 41.227528], [69.192846, 41.228258], [69.19422899999999, 41.228736], [69.194256, 41.230568999999996], [69.197943, 41.23271], [69.197962, 41.234172], [69.19927899999999, 41.234116], [69.20064099999999, 41.235028], [69.199822, 41.236712999999995], [69.201666, 41.237859], [69.200803, 41.239048], [69.201122, 41.240148999999995], [69.202618, 41.240128], [69.204573, 41.24258], [69.20686599999999, 41.242306], [69.2075, 41.244492], [69.209412, 41.245011], [69.212861, 41.247602], [69.215193, 41.248138999999995], [69.216163, 41.251512], [69.217029, 41.251909999999995], [69.21780799999999, 41.245948999999996], [69.21253999999999, 41.24129], [69.204878, 41.23065], [69.201525, 41.228080999999996], [69.199936, 41.227433], [69.19991, 41.22267], [69.19612, 41.217856999999995], [69.198577, 41.216863], [69.19909799999999, 41.217309], [69.200349, 41.216418999999995], [69.19556399999999, 41.211104], [69.192385, 41.208399], [69.19147099999999, 41.206827], [69.189807, 41.206098999999995], [69.191395, 41.203587], [69.20045, 41.207395], [69.201134, 41.207221], [69.20222, 41.206447], [69.202624, 41.204364], [69.201528, 41.203255999999996], [69.203574, 41.19816], [69.198981, 41.195302999999996], [69.197057, 41.195561999999995], [69.186966, 41.191342], [69.182846, 41.186025], [69.196158, 41.186876], [69.196201, 41.186325], [69.19873299999999, 41.188984], [69.214694, 41.189748], [69.215201, 41.187673], [69.217561, 41.187801], [69.218375, 41.185551], [69.21977, 41.184067999999996], [69.216128, 41.179324], [69.205772, 41.176489], [69.20138899999999, 41.177056], [69.19326199999999, 41.166709999999995], [69.171844, 41.167178], [69.157189, 41.158097], [69.121836, 41.155024], [69.121689, 41.156774999999996], [69.120892, 41.157272], [69.12247099999999, 41.157835], [69.123172, 41.15871], [69.12102399999999, 41.159155], [69.121625, 41.159884999999996], [69.123521, 41.160481], [69.123789, 41.161137], [69.123448, 41.161865], [69.121954, 41.162079999999996], [69.12174499999999, 41.163357], [69.12025899999999, 41.164609999999996], [69.11330699999999, 41.169669], [69.11484899999999, 41.171744], [69.114293, 41.174808999999996], [69.11495599999999, 41.176687], [69.11976899999999, 41.179173], [69.119481, 41.180048], [69.123622, 41.182731], [69.125564, 41.182888999999996], [69.130703, 41.186758999999995], [69.13042399999999, 41.186977999999996], [69.132691, 41.189271], [69.134523, 41.190528], [69.134222, 41.192772999999995], [69.136951, 41.195032999999995], [69.13937299999999, 41.196065], [69.142651, 41.198516], [69.144126, 41.200615], [69.149356, 41.202386], [69.155822, 41.205946], [69.158203, 41.20785], [69.162661, 41.210054], [69.16232, 41.210471999999996], [69.16081799999999, 41.209993999999995], [69.158998, 41.210501], [69.15437399999999, 41.208476], [69.149121, 41.205636], [69.14499099999999, 41.202427], [69.143875, 41.202525], [69.14263799999999, 41.203858], [69.141089, 41.204294], [69.141657, 41.202591999999996], [69.136904, 41.198599], [69.137351, 41.197751], [69.138102, 41.197570999999996], [69.137072, 41.196089], [69.13598499999999, 41.19578], [69.135094, 41.194724], [69.134346, 41.194998], [69.133259, 41.194525], [69.133241, 41.192963], [69.131432, 41.192775], [69.130664, 41.192135], [69.129362, 41.192214], [69.12785699999999, 41.190782999999996], [69.125407, 41.191956999999995], [69.12517799999999, 41.192769], [69.119444, 41.197371], [69.121703, 41.198158], [69.121276, 41.200435], [69.123598, 41.201420999999996], [69.120626, 41.202344], [69.12098399999999, 41.20384], [69.11821499999999, 41.203635999999996], [69.117449, 41.205096], [69.117079, 41.204988], [69.115112, 41.210879], [69.113311, 41.212382999999996], [69.113596, 41.213904], [69.110624, 41.214825999999995], [69.108515, 41.214287], [69.10616, 41.213273], [69.105698, 41.212496], [69.105017, 41.212513], [69.105029, 41.210738], [69.103518, 41.210989], [69.099304, 41.205087], [69.10069399999999, 41.199065999999995], [69.100088, 41.197739], [69.09273, 41.192181999999995], [69.09087099999999, 41.193115999999996], [69.090119, 41.19305], [69.089626, 41.192335], [69.088145, 41.192395999999995], [69.086772, 41.191714999999995], [69.085978, 41.190317], [69.08261999999999, 41.189644], [69.081547, 41.188919], [69.080592, 41.187038], [69.07987299999999, 41.186702], [69.077951, 41.189187], [69.084842, 41.192352], [69.083306, 41.196264], [69.07520099999999, 41.197677], [69.06244099999999, 41.198676999999996], [69.052506, 41.201156], [69.047613, 41.201318], [69.042828, 41.200508], [69.029224, 41.207347], [69.032335, 41.209517999999996], [69.03372999999999, 41.21216], [69.033309, 41.217456999999996], [69.03147799999999, 41.225536999999996]
				// 		]
						
				// 	],
				// 	// Описываем свойства геообъекта.
				// 	{
				// 		// Содержимое балуна.
				// 		balloonContent: "Рыбные места"
				// 	}, {
				// 		// Описываем опции геообъекта.
				// 		// Фоновое изображение.
				// 		//fillImageHref: 'images/lake.png',
				// 		// Тип заливки фоном.
				// 		fillMethod: 'stretch',
				// 		// Убираем видимость обводки.
				// 		stroke: true
				// 	}
				// );
				// console.log(poli[0]);
				// myMap.geoObjects.add(myPolygon);

			},
			statusCode: {
				404: function(){alert( "page not found" );}
			},
      complete: function(response){
      	window.dataPoligon = JSON.stringify(response.responseText);
      	//console.log(response.responseText);
      }
  	});
	}

	myMap.controls.add(searchControl);
	
	window.searchEnty = function(org){
		searchControl.search(org);
	}




	var marker = new ymaps.Placemark(mainDot, {
		balloonContent: 'Название квартиры <br> <big class="color-1">75 000</big>'
	}, {
		iconLayout: 'default#image',
		iconImageHref: "img/icons/marker-green.png",
		iconImageSize: [21, 30]
	});
	myMap.geoObjects.add(marker);



	myMap.events.add("zoom", function(){
		//console.log("zoom");
	})
	// Включаем редактирование круга.


	$("[data-search-enty]").eq(0).trigger("click");


	function drawPoligons(arr) {
		window.mata = arr;
		for (var i = 0; i < arr.length; i++) {
			var poli = arr[i].data.items[0].displayGeometry.geometries[0].coordinates;
			//console.log(poli[0].coordinates[0]);
			
			var myPolygon = new ymaps.Polygon([
					// Указываем координаты вершин многоугольника.
					
						poli[0]
					
				],
				// Описываем свойства геообъекта.
				{
					// Содержимое балуна.
					balloonContent: "Рыбные места"
				}, {
					// Описываем опции геообъекта.
					// Фоновое изображение.
					//fillImageHref: 'images/lake.png',
					// Тип заливки фоном.
					fillMethod: 'stretch',
					// Убираем видимость обводки.
					stroke: true
				}
			);
			console.log(poli[0]);
			myMap.geoObjects.add(myPolygon);
		}
	}





}

ymaps.ready(init);








function init() {

	var mainDot = [41.326892, 69.313324];

	window.myMap = new ymaps.Map('map-beside', {
		center: mainDot,
		zoom: 14,
		checkZoomRange: true,
		restrictMapArea: true,
		searchControlProvider: 'yandex#search',
		controls: []
	})




	// Создаем круг.
	window.circle = new ymaps.Circle([
			// Координаты центра круга.
			mainDot,
			// Радиус круга в метрах.
			1000
		], {}, {
			fillColor: "#cc25271f",
			strokeColor: "#2121213d",
			strokeOpacity: 0.8,
			strokeWidth: 5
		});

	// Добавляем круг на карту.
	if( $("[data-beside-circle]").length > 0 )
		myMap.geoObjects.add(circle);
	//circle.editor.startEditing();

	// Изменение радиуса круга
	$(document).on("change", "[name='circleradius']", function(){
		var val = $(this).val().trim()*1;
		if( isNaN(val) )
			return;
		circle.geometry.setRadius(val);		
	})



	// Создадим экземпляр элемента управления «поиск по карте»
	// с установленной опцией провайдера данных для поиска по организациям.
	window.searchControl = new ymaps.control.SearchControl({
		options: {
			//float: 'right',
			//floatIndex: 100,
			noPlacemark: false,
			//noCentering: true,
			//noPopup: true,
			useMapBounds: true,
			visible: !false,
			//kind: "route",
			checkZoomRange: true,
			//resultsPerPage: 20,
			//showFeedbackAfterResults: true,
			strictBounds: true,
			//boundedBy: circle.geometry.getBounds(),
			results: 50,
			provider: 'yandex#search'	
		}
	});
	window.resultsDots;
	searchControl.events.add("load", function(e){
		e.preventDefault();
		resultsDots = searchControl.getResultsArray();
		dotsInCircle(resultsDots);
	});


	// Фильтрация точек относительно радиуса
	window.dotsInCircle = function (dots){

		var radiusStart = circle.geometry.getBounds()[0],
				radiusEnd = circle.geometry.getBounds()[1],
				dotLat, dotLng;

		//console.log(radiusStart);
		for (var i = 0; i < dots.length; i++) {
			dotLat = dots[i].geometry.getCoordinates()[0];
			dotLng = dots[i].geometry.getCoordinates()[1];
			dots[i].options.set({
				iconLayout: 'default#image',
				iconImageHref: "img/icons/marker-offices-2.png",
				iconImageSize: [29, 41]
			});
			if( dotLat > radiusStart[0] && dotLng > radiusStart[1] && dotLat < radiusEnd[0] && dotLng < radiusEnd[1]){
				dots[i].options.set('visible', true);
				//console.log(dots[i]);
				//window["zx"+i] = dots[i];
			}else{
				//console.log("false");
				dots[i].options.set('visible', false);
			}
		}

	}

	window.getAreasPoligons = function(){
		$.ajax({
			type: "GET",
      url: "areaspoligons.json",
			success: function(data){
				window.mata = data;
				drawPoligons(data);

				// var poli = data[0].data.items[0].displayGeometry.geometries[0].coordinates;
				// //console.log(poli[0].coordinates[0]);
				
				// var myPolygon = new ymaps.Polygon([
				// 		// Указываем координаты вершин многоугольника.
						
				// 		[
				// 			[69.03002599999999, 41.225173], [69.02890099999999, 41.227805], [69.02707699999999, 41.22864], [69.026465, 41.230931999999996], [69.029051, 41.238333999999995], [69.028815, 41.239922], [69.02637899999999, 41.242861], [69.022324, 41.244699], [69.020811, 41.246157], [69.023257, 41.247752], [69.025306, 41.250431999999996], [69.035831, 41.252416], [69.038996, 41.254448], [69.039672, 41.255282], [69.039222, 41.257546999999995], [69.04101399999999, 41.261278999999995], [69.040241, 41.264638999999995], [69.03805299999999, 41.266338999999995], [69.03632499999999, 41.266266], [69.03536, 41.266841], [69.03337499999999, 41.266646], [69.031937, 41.267682], [69.029094, 41.268119999999996], [69.027506, 41.269211999999996], [69.027238, 41.270078999999996], [69.025843, 41.270134999999996], [69.025092, 41.270936999999996], [69.023826, 41.270993], [69.02271, 41.271826999999995], [69.017099, 41.273373], [69.017797, 41.276303], [69.016209, 41.277896999999996], [69.015694, 41.284089], [69.01346199999999, 41.289235999999995], [69.01484599999999, 41.293298], [69.018451, 41.298581], [69.020329, 41.298262], [69.021627, 41.298994], [69.02373, 41.298232999999996], [69.026358, 41.298241999999995], [69.02878299999999, 41.302651], [69.030102, 41.303314], [69.03757999999999, 41.301704], [69.039394, 41.305353], [69.041057, 41.305903], [69.04204399999999, 41.307553999999996], [69.045033, 41.309999999999995], [69.049125, 41.311011], [69.05165699999999, 41.310603], [69.05623299999999, 41.310781], [69.057881, 41.313728999999995], [69.058065, 41.318964], [69.059444, 41.321548], [69.058416, 41.326817999999996], [69.066619, 41.332653], [69.072777, 41.335313], [69.074648, 41.339566999999995], [69.079454, 41.338406], [69.080972, 41.337593999999996], [69.086047, 41.338006], [69.089688, 41.336316], [69.090251, 41.338114999999995], [69.09211499999999, 41.340002999999996], [69.092406, 41.342317], [69.093813, 41.344536999999995], [69.094606, 41.350046], [69.095705, 41.350068], [69.095764, 41.351091], [69.09760399999999, 41.351859], [69.098494, 41.352893], [69.103183, 41.353916], [69.105009, 41.353352], [69.10734599999999, 41.354045], [69.114113, 41.352343999999995], [69.11912099999999, 41.352227], [69.11905399999999, 41.350331], [69.11963, 41.350069999999995], [69.11991499999999, 41.348374], [69.126397, 41.347147], [69.12848799999999, 41.344905], [69.132919, 41.344028], [69.136449, 41.344924999999996], [69.139308, 41.344063999999996], [69.139743, 41.343241], [69.142905, 41.341994], [69.145043, 41.344091999999996], [69.14694399999999, 41.343579], [69.146615, 41.342486], [69.150592, 41.340765999999995], [69.15220699999999, 41.342504], [69.154916, 41.341657], [69.15471, 41.343312], [69.15616, 41.343342], [69.155885, 41.344558], [69.157232, 41.344801], [69.156286, 41.346385], [69.156965, 41.347463999999995], [69.15785699999999, 41.347563], [69.15914099999999, 41.34927], [69.16122399999999, 41.350128], [69.161469, 41.350967], [69.162105, 41.35071], [69.163212, 41.351552], [69.163595, 41.352398], [69.16279399999999, 41.353462], [69.162654, 41.355258], [69.16602499999999, 41.360766999999996], [69.165924, 41.361806], [69.16722399999999, 41.361788999999995], [69.166747, 41.363099], [69.16787, 41.363074], [69.168874, 41.363664], [69.169979, 41.365538], [69.170687, 41.365632999999995], [69.171572, 41.366679999999995], [69.173739, 41.366606999999995], [69.17699999999999, 41.367394999999995], [69.179537, 41.367176], [69.182908, 41.368392], [69.185132, 41.368103], [69.172096, 41.359525], [69.16753899999999, 41.354575], [69.165188, 41.348323], [69.163988, 41.336797999999995], [69.162888, 41.333724], [69.159784, 41.328157], [69.157916, 41.328246], [69.156711, 41.327244], [69.154816, 41.327278], [69.154669, 41.325969], [69.153437, 41.325235], [69.153922, 41.324537], [69.153548, 41.323420999999996], [69.154532, 41.322474], [69.153533, 41.321106], [69.154294, 41.32064], [69.152487, 41.320324], [69.147759, 41.313393999999995], [69.14732599999999, 41.313147], [69.146472, 41.313606], [69.148018, 41.311658], [69.147221, 41.310157], [69.148279, 41.309906], [69.14895, 41.308352], [69.148501, 41.305306], [69.147503, 41.303999], [69.145161, 41.302782], [69.144735, 41.300591], [69.142802, 41.299876999999995], [69.14282899999999, 41.29887], [69.141066, 41.296827], [69.140123, 41.296631999999995], [69.140028, 41.295879], [69.138426, 41.294942], [69.138679, 41.293923], [69.138094, 41.292438], [69.133648, 41.289746], [69.13380599999999, 41.288700999999996], [69.13203899999999, 41.288018], [69.131901, 41.287290999999996], [69.134872, 41.283927], [69.134081, 41.281258], [69.132829, 41.280372], [69.13331099999999, 41.278931], [69.13149, 41.278996], [69.130264, 41.277134], [69.128565, 41.275965], [69.128132, 41.274085], [69.125483, 41.272017], [69.125187, 41.270109], [69.122709, 41.26989], [69.122784, 41.268024], [69.121693, 41.265755], [69.122215, 41.265571], [69.123256, 41.267244999999996], [69.125254, 41.266883], [69.131587, 41.269059999999996], [69.134207, 41.271735], [69.136635, 41.272787], [69.139704, 41.275244], [69.140956, 41.277795999999995], [69.143072, 41.278599], [69.14468099999999, 41.28039], [69.14611, 41.281136], [69.147487, 41.280938], [69.146256, 41.276178], [69.146862, 41.264949], [69.14766999999999, 41.262465999999996], [69.149501, 41.260175], [69.152318, 41.257897], [69.16091899999999, 41.252508999999996], [69.163371, 41.250116], [69.166724, 41.240251], [69.164551, 41.235859], [69.16883, 41.234711], [69.17406199999999, 41.228311], [69.17383099999999, 41.227142], [69.171825, 41.226031], [69.172448, 41.225437], [69.1719, 41.225131999999995], [69.17440599999999, 41.222522999999995], [69.173963, 41.221705], [69.175516, 41.221347], [69.17452899999999, 41.218765], [69.176369, 41.217679], [69.177613, 41.218942999999996], [69.179644, 41.217906], [69.180585, 41.219012], [69.18375999999999, 41.21667], [69.18139, 41.214518999999996], [69.18609099999999, 41.211365], [69.18656399999999, 41.212399999999995], [69.18535, 41.212762999999995], [69.185267, 41.214092], [69.18620899999999, 41.215064], [69.185532, 41.215964], [69.186413, 41.216234], [69.187472, 41.215769], [69.188328, 41.216606999999996], [69.18697399999999, 41.217302], [69.185715, 41.218883], [69.185818, 41.22072], [69.18749799999999, 41.220653999999996], [69.186447, 41.222558], [69.18777299999999, 41.222176], [69.188903, 41.222454], [69.187867, 41.22387], [69.191638, 41.2251], [69.191019, 41.226161], [69.192432, 41.22658], [69.19243399999999, 41.227241], [69.193439, 41.227528], [69.192846, 41.228258], [69.19422899999999, 41.228736], [69.194256, 41.230568999999996], [69.197943, 41.23271], [69.197962, 41.234172], [69.19927899999999, 41.234116], [69.20064099999999, 41.235028], [69.199822, 41.236712999999995], [69.201666, 41.237859], [69.200803, 41.239048], [69.201122, 41.240148999999995], [69.202618, 41.240128], [69.204573, 41.24258], [69.20686599999999, 41.242306], [69.2075, 41.244492], [69.209412, 41.245011], [69.212861, 41.247602], [69.215193, 41.248138999999995], [69.216163, 41.251512], [69.217029, 41.251909999999995], [69.21780799999999, 41.245948999999996], [69.21253999999999, 41.24129], [69.204878, 41.23065], [69.201525, 41.228080999999996], [69.199936, 41.227433], [69.19991, 41.22267], [69.19612, 41.217856999999995], [69.198577, 41.216863], [69.19909799999999, 41.217309], [69.200349, 41.216418999999995], [69.19556399999999, 41.211104], [69.192385, 41.208399], [69.19147099999999, 41.206827], [69.189807, 41.206098999999995], [69.191395, 41.203587], [69.20045, 41.207395], [69.201134, 41.207221], [69.20222, 41.206447], [69.202624, 41.204364], [69.201528, 41.203255999999996], [69.203574, 41.19816], [69.198981, 41.195302999999996], [69.197057, 41.195561999999995], [69.186966, 41.191342], [69.182846, 41.186025], [69.196158, 41.186876], [69.196201, 41.186325], [69.19873299999999, 41.188984], [69.214694, 41.189748], [69.215201, 41.187673], [69.217561, 41.187801], [69.218375, 41.185551], [69.21977, 41.184067999999996], [69.216128, 41.179324], [69.205772, 41.176489], [69.20138899999999, 41.177056], [69.19326199999999, 41.166709999999995], [69.171844, 41.167178], [69.157189, 41.158097], [69.121836, 41.155024], [69.121689, 41.156774999999996], [69.120892, 41.157272], [69.12247099999999, 41.157835], [69.123172, 41.15871], [69.12102399999999, 41.159155], [69.121625, 41.159884999999996], [69.123521, 41.160481], [69.123789, 41.161137], [69.123448, 41.161865], [69.121954, 41.162079999999996], [69.12174499999999, 41.163357], [69.12025899999999, 41.164609999999996], [69.11330699999999, 41.169669], [69.11484899999999, 41.171744], [69.114293, 41.174808999999996], [69.11495599999999, 41.176687], [69.11976899999999, 41.179173], [69.119481, 41.180048], [69.123622, 41.182731], [69.125564, 41.182888999999996], [69.130703, 41.186758999999995], [69.13042399999999, 41.186977999999996], [69.132691, 41.189271], [69.134523, 41.190528], [69.134222, 41.192772999999995], [69.136951, 41.195032999999995], [69.13937299999999, 41.196065], [69.142651, 41.198516], [69.144126, 41.200615], [69.149356, 41.202386], [69.155822, 41.205946], [69.158203, 41.20785], [69.162661, 41.210054], [69.16232, 41.210471999999996], [69.16081799999999, 41.209993999999995], [69.158998, 41.210501], [69.15437399999999, 41.208476], [69.149121, 41.205636], [69.14499099999999, 41.202427], [69.143875, 41.202525], [69.14263799999999, 41.203858], [69.141089, 41.204294], [69.141657, 41.202591999999996], [69.136904, 41.198599], [69.137351, 41.197751], [69.138102, 41.197570999999996], [69.137072, 41.196089], [69.13598499999999, 41.19578], [69.135094, 41.194724], [69.134346, 41.194998], [69.133259, 41.194525], [69.133241, 41.192963], [69.131432, 41.192775], [69.130664, 41.192135], [69.129362, 41.192214], [69.12785699999999, 41.190782999999996], [69.125407, 41.191956999999995], [69.12517799999999, 41.192769], [69.119444, 41.197371], [69.121703, 41.198158], [69.121276, 41.200435], [69.123598, 41.201420999999996], [69.120626, 41.202344], [69.12098399999999, 41.20384], [69.11821499999999, 41.203635999999996], [69.117449, 41.205096], [69.117079, 41.204988], [69.115112, 41.210879], [69.113311, 41.212382999999996], [69.113596, 41.213904], [69.110624, 41.214825999999995], [69.108515, 41.214287], [69.10616, 41.213273], [69.105698, 41.212496], [69.105017, 41.212513], [69.105029, 41.210738], [69.103518, 41.210989], [69.099304, 41.205087], [69.10069399999999, 41.199065999999995], [69.100088, 41.197739], [69.09273, 41.192181999999995], [69.09087099999999, 41.193115999999996], [69.090119, 41.19305], [69.089626, 41.192335], [69.088145, 41.192395999999995], [69.086772, 41.191714999999995], [69.085978, 41.190317], [69.08261999999999, 41.189644], [69.081547, 41.188919], [69.080592, 41.187038], [69.07987299999999, 41.186702], [69.077951, 41.189187], [69.084842, 41.192352], [69.083306, 41.196264], [69.07520099999999, 41.197677], [69.06244099999999, 41.198676999999996], [69.052506, 41.201156], [69.047613, 41.201318], [69.042828, 41.200508], [69.029224, 41.207347], [69.032335, 41.209517999999996], [69.03372999999999, 41.21216], [69.033309, 41.217456999999996], [69.03147799999999, 41.225536999999996]
				// 		]
						
				// 	],
				// 	// Описываем свойства геообъекта.
				// 	{
				// 		// Содержимое балуна.
				// 		balloonContent: "Рыбные места"
				// 	}, {
				// 		// Описываем опции геообъекта.
				// 		// Фоновое изображение.
				// 		//fillImageHref: 'images/lake.png',
				// 		// Тип заливки фоном.
				// 		fillMethod: 'stretch',
				// 		// Убираем видимость обводки.
				// 		stroke: true
				// 	}
				// );
				// console.log(poli[0]);
				// myMap.geoObjects.add(myPolygon);

			},
			statusCode: {
				404: function(){alert( "page not found" );}
			},
      complete: function(response){
      	window.dataPoligon = JSON.stringify(response.responseText);
      	//console.log(response.responseText);
      }
  	});
	}

	myMap.controls.add(searchControl);
	
	window.searchEnty = function(org){
		searchControl.search(org);
	}




	var marker = new ymaps.Placemark(mainDot, {
		balloonContent: 'Название квартиры <br> <big class="color-1">75 000</big>'
	}, {
		iconLayout: 'default#image',
		iconImageHref: "img/icons/marker-green.png",
		iconImageSize: [21, 30]
	});
	myMap.geoObjects.add(marker);



	myMap.events.add("zoom", function(){
		//console.log("zoom");
	})
	// Включаем редактирование круга.


	$("[data-search-enty]").eq(0).trigger("click");


	function drawPoligons(arr) {
		window.mata = arr;
		for (var i = 0; i < arr.length; i++) {
			var poli = arr[i].data.items[0].displayGeometry.geometries[0].coordinates;
			//console.log(poli[0].coordinates[0]);
			
			var myPolygon = new ymaps.Polygon([
					// Указываем координаты вершин многоугольника.
					
						poli[0]
					
				],
				// Описываем свойства геообъекта.
				{
					// Содержимое балуна.
					balloonContent: "Рыбные места"
				}, {
					// Описываем опции геообъекта.
					// Фоновое изображение.
					//fillImageHref: 'images/lake.png',
					// Тип заливки фоном.
					fillMethod: 'stretch',
					// Убираем видимость обводки.
					stroke: true
				}
			);
			console.log(poli[0]);
			myMap.geoObjects.add(myPolygon);
		}
	}





}

ymaps.ready(init);






/*
	other

*/
$(".beside-nav").on("click", "[data-search-enty]", function(){
	searchRequest = $(this).attr("data-search-enty");
	console.log(searchRequest);
	searchEnty(searchRequest);
});

